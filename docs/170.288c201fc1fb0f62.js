"use strict";(self.webpackChunkportfolio_website=self.webpackChunkportfolio_website||[]).push([[170],{1170:(x,d,r)=>{r.r(d),r.d(d,{LoginModule:()=>O});var s=r(994),h=r(5961),u=r(4319),a=r(1659);let c=(()=>{class t{constructor(o){this.payload=o}}return t.type="[Auth] Login",t})(),L=(()=>{class t{}return t.type="[Auth] Logout",t})();var n=r(9724),m=r(8347),p=r(5535),f=r(1521),y=r(8918),z=r(1048),C=r(4344),P=r(8238);function S(t,e){1&t&&(n.TgZ(0,"div"),n._uU(1,"Invalid username or password"),n.qZA())}const F=[{path:"",component:(()=>{class t{constructor(o,l,v){this.store=o,this.fb=l,this.router=v}submitForm(){this.validateForm.valid?this.store.dispatch(new c(this.validateForm.getRawValue())).subscribe(o=>{this.invalidLogin=!1,this.router.navigate(["/dashboard/home"])},o=>{this.invalidLogin=!0}):Object.values(this.validateForm.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})}ngOnInit(){this.validateForm=this.fb.group({userName:[null,[a.kI.required]],password:[null,[a.kI.required]]})}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(s.yh),n.Y36(a.qu),n.Y36(u.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login-page"]],decls:13,vars:3,consts:[[1,"login"],["nz-form","",2,"width","40%",3,"formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userName","placeholder","Username"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],[4,"ngIf"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"]],template:function(o,l){1&o&&(n.TgZ(0,"div",0)(1,"form",1),n.NdJ("ngSubmit",function(){return l.submitForm()}),n.TgZ(2,"nz-form-item")(3,"nz-form-control",2)(4,"nz-input-group",3),n._UZ(5,"input",4),n.qZA()()(),n.TgZ(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-input-group",6),n._UZ(9,"input",7),n.qZA()()(),n.YNc(10,S,2,0,"div",8),n.TgZ(11,"button",9),n._uU(12,"Log in"),n.qZA()()()),2&o&&(n.xp6(1),n.Q6J("formGroup",l.validateForm),n.xp6(9),n.Q6J("ngIf",l.invalidLogin),n.xp6(1),n.Q6J("nzType","primary"))},directives:[a._Y,a.JL,m.Lr,a.sg,p.SK,m.Nx,p.t3,m.Fd,f.gB,y.w,f.Zp,a.Fj,a.JJ,a.u,z.O5,C.ix,P.dQ],styles:[".login[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.login[_ngcontent-%COMP%]   .login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login[_ngcontent-%COMP%]   .login-form-forgot[_ngcontent-%COMP%]{float:right}.login[_ngcontent-%COMP%]   .login-form-button[_ngcontent-%COMP%]{width:100%}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[u.Bz.forChild(F)],u.Bz]}),t})();var g=r(4762),A=r(8168),Z=r(2340),T=r(9725);let I=(()=>{class t{constructor(o){this.http=o}login(o){return this.http.post(`${Z.N.BACKEND_URL}/Authentication/login`,o)}}return t.\u0275fac=function(o){return new(o||t)(n.LFG(T.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),i=class{constructor(e){this.loginService=e}static token(e){return e.token}static isAuthenticated(e){return!!e.token}login(e,o){return this.loginService.login(o.payload).pipe((0,A.b)(l=>{e.patchState({token:l.token,username:o.payload.username}),localStorage.setItem("jwt",l.token)}))}logout(e){e.setState({token:null,username:null})}};i.\u0275fac=function(e){return new(e||i)(n.LFG(I))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac}),(0,g.gn)([(0,s.aU)(c)],i.prototype,"login",null),(0,g.gn)([(0,s.aU)(L)],i.prototype,"logout",null),(0,g.gn)([(0,s.Qf)()],i,"token",null),(0,g.gn)([(0,s.Qf)()],i,"isAuthenticated",null),i=(0,g.gn)([(0,s.ZM)({name:"login",defaults:{token:null,username:null}})],i);let O=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[h.m,M,s.$l.forFeature([i])]]}),t})()}}]);